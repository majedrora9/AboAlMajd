<form id="appointment-form">
  <label for="name">الاسم:</label>
  <input type="text" id="name" required><br>

  <label for="time">الوقت (مثال: 4:00):</label>
  <input type="text" id="time" required><br>

  <label for="ampm">AM/PM:</label>
  <select id="ampm">
    <option value="AM">AM</option>
    <option value="PM">PM</option>
  </select><br>

  <button type="submit">حجز الموعد</button>
</form>

<div id="response-message"></div>

<script>
function checkAvailability(name, time, ampm) {
  // تأكد من استخدام البيانات باللغة العربية في الرابط
  const apiUrl = `https://script.google.com/macros/s/AKfycbwfq087thMPtgupASQr-O4QQ7hAQBSZhSDFNU-5rn2D9nvBBiXOvzHiiTW_Fl02M9xgpA/exec`;

  fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      if (data.available) {
        bookAppointment(name, time, ampm); // إذا الموعد متاح، إحجز
      } else {
        document.getElementById("response-message").innerText = "عذراً، الموعد محجوز مسبقاً.";
      }
    })
    .catch((error) => {
      console.error("Error checking availability:", error);
    });
}

function bookAppointment(name, time, ampm) {
  const apiUrl = `https://script.google.com/macros/s/AKfycbwfq087thMPtgupASQr-O4QQ7hAQBSZhSDFNU-5rn2D9nvBBiXOvzHiiTW_Fl02M9xgpA/exec?action=bookAppointment&name=${name}&time=${time}&ampm=${ampm}`;

  fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      document.getElementById("response-message").innerText = "تم حجز الموعد بنجاح!";
    })
    .catch((error) => {
      console.error("Error booking appointment:", error);
    });
}

</script>
